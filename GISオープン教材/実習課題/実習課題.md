#実習課題について

**Menu**
--------
* [第一回課題（20160929）](#第一回課題（20160929）)
* [第二回課題（20161006）](#第二回課題（20161006）)
* [第三回課題（20161006）](#第三回課題（20161013）)


>実習時の注意点やメモを[作業メモ]をご参照ください。

## <a name = "第一回課題（20160929）"></a>第一回課題（20160929）

### 本日の課題
無償で利用出来るデータを活用し、以下の課題1と2に該当する地図を作成しなさい。
提出する地図は、凡例、方位、縮尺バー、タイトル（学籍番号、氏名、地図名）をレイアウトしたものとします。本課題と対応する教材は、[QGISビギナーズマニュアル]および[GRASSビギナーズマニュアル]の教材となります。

**課題１**  
QGISとプラグインを用いて、任意の地域の地図を作成しなさい。なお、使用するタイル（背景地図）は基本測量成果に該当しないものとする。
（必要な場合は、サンプルデータ[fkuchiyama_sample.zip](https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/sample/fkuchiyama_sample.zip?raw=true)を使用すること）

**完成例**  

![完成例](pic/Q1.png)

**手順**  

① サンプルデータを読み込む  
② タイルレイヤープラグインかOpenLayersPluginを用いて背景地図を読み込む  
③ 地図をレイアウトする   

#### 学習ポイント：空間データの特徴とGISソフトウェアの活用

* ベクトルデータとラスターデータの違い
* QGISとプラグインについての理解
* 属性テーブルとプロパティについての理解
* 地図のレイアウト

※　提出時に図のタイトル、名前、学籍番号を記載すること（方法：プリントコンポーザーから、新規ラベルの追加 > アイテムプロパティ > メインプロパティ（タイトル等の入力） > 外観,フォント（文字のサイズ調整））

------

**課題2**  
GRASS GISを用いて、高松市の地形(標高)概観図を作成しなさい。  
※20160929の実習では、課題2は提出しなくてよい

**手順**  

① QGISを用いてマップセットを作成する  
② GRASS GISでマップセットを読み込む  
③ カラーを調整し、地図をレイアウトする  

![完成例](pic/G1.png)

#### 学習ポイント：GRASS GISの操作

* マップセットが作成できたか

[△メニューへもどる]
-------------
## <a name = "第二回課題（20161006）"></a>第二回課題（20161006）

### 本日の課題
無償で利用出来るデータを活用し、以下の1〜3に該当する地図を作成しなさい。
提出する地図は、凡例、方位、縮尺バー、タイトル（学籍番号、氏名、地図名）をレイアウトしたものとします。
課題提出は、課題フォームより行うこととする。本課題と対応する教材は、[既存データの地図データと属性データ]および[空間データ]の教材となります。


**課題１:旧測地系と新測地系**  
[政府統計局e-stat]（平成２２年国勢調査（小地域））を利用し、日本測地系平面直角座標系・Shape形式と世界測地系平面直角座標系・Shape形式のデータを用いて、両データが重なり合わない地図を作成しなさい。
※　最新の測地系はJGD2011であるが、QGIS2.8.4ではJGD2011の変換ができないため、本実習ではJGD2000を新測地系としている（2.14は、JGD2011に対応）。

**完成例**  
![完成例](pic/8-1.png)

**手順**  
①　e-statから任意の地域の異なるshapeファイル（投影座標系のもの）をダウンロードする  
②　QGISでデータを表示する（デフォルトではずれて表示されないため、右下のボタンから、オンザフライ投影のチェックをはずす）  
③　QGISビギナーズマニュアルを参考に、地図をレイアウトする  
④　レイアウト後に旧測地系データを新測地系に変換する（地図データが重なればOK）  
⑤　QGISの作業ファイル（.qgs）に任意の名前をつけ保存し、画面を閉じる

#### 学習ポイント：測地系
GISでは、データ分析をする前にデータの測地系を整える必要があります。この作業を行わないと位置のズレが生じ、データの処理が行えない場合があります。異なった測地系のデータを扱う場合は、以下の項目への理解が必要となります（わからない単語はインターネットで調べてください）。

* 地理座標系と投影座標系の違い
* 平面直角座標系第◯系の意味
* 旧測地系と新測地系の違い
* 座標系の変換手法

-------
**課題2：ジオリファレンス**  
鯖江市のオープンデータより古地図007と基盤地図情報2500基本項目鯖江市道路をダウンロードし、それをもとにGCPを取得し、画像の位置あわせを行った地図を作成しなさい（なお、基盤地図情報の取得変換ができない場合は、地理院タイル等を利用すること）。

**完成例**  
![完成例](pic/8-2.png)

**手順**  
① [鯖江市のオープンデータ](http://www.city.sabae.fukui.jp/pageview.html?id=12768)より古地図007をダウンロードする。  
② [sabae_sample](https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/sample/sabae_sample.zip?raw=true)とタイルレイヤプラグインを用いて地理院タイル（標準地図など）を読み込んでおく（高い位置精度を求める場合は、基盤地図情報の道路縁等を用いることが望ましい。）  
④ 古地図を読み込みQGISのジオリファレンサーを起動する  
⑤ ジオリファレンサーの利用法を参考に、古地図007にGCP(Ground Control Point)を付加する(完全には一致しないため、おおまかでよい)  
⑥ QGISビギナーズマニュアルを参考に、地図をレイアウトする(古地図のプロパティを開き、画像を透過すると良い)  
⑦ QGISの作業ファイル（.qgs）に任意の名前をつけ保存し、画面を閉じる  

※本来は精度を求めるため、ベクトルデータを用いてジオリファレンスをすることが多い。しかし、本実習ではQGIS2.8がJGD2011に対応していないことから、基盤地図情報（道路縁など）のような高精度ベクトルデータを用いていない。

#### 学習ポイント：ジオリファレンス
* ジオリファレンスとは（どのようなときに必要な処理か？）

-------

**課題3：ジオコーディング**  
サンプルデータ[susono_emergency_shelter.csv](https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/sample/susono_sample.zip?raw=true)の住所を用いて、ジオコーディング（アドレスマッチング)を行い地図を作成しなさい。

**完成例**  
![完成例](pic/8-3.png)

**手順**  
① CSVアドレスマッチングサービスを用いて、サンプルデータに位置情報（X、Y）を付加する。  
② CSVデータを読み込みshapeファイルに変換する。  
③ 変換したShapeファイルの座標系を平面直角座標第８系に変換する  
④ QGISビギナーズマニュアルを参考に、地図をレイアウトする(古地図のプロパティを開き、画像を透過すると良い)  
⑤ QGISの作業ファイル（.qgs）に任意の名前をつけ保存し、画面を閉じる


#### 学習ポイント：ジオコーディング
* ジオコーディングとは（どのような時に必要な処理か？）

[△メニューへもどる]

-------

## <a name="第三回課題（20161013）"></a>第三回課題（20161013）

### 本日の課題:新規ラスタデータとベクトルデータの作成練習
ベクトルデータとラスターデータ（課題データ）を用いて、以下の課題1に該当する地図を作成してください。
提出する地図は、凡例、方位、縮尺バー、タイトル（学籍番号、氏名、地図名）をレイアウトしたものとします。
課題提出は、課題フォームを利用してください。本課題と対応する教材は、[視覚的伝達]および[空間データの結合・修正]の教材となります。

**課題１:ベクトルデータの加工と地図作成**  
課題データと地理院タイル（東日本大震災被災地震災後オルソ画像（2012年10月～2013））を用いて完成例のような画像を作成し、課題フォームより提出してください。課題の作成には、下記の手順と[空間データの結合・修正]の教材を参考にしてください。タイルレイヤプラグインで用いるTSVファイルは、第1回の課題データに含まれています
(使い方は[作業メモ]を参照)。  

>課題データは、基盤地図情報数値標高モデル（5ｍDEM）を変換し、複数のラスタを結合した後に、平面直角座標系へ座標変換を行ったものである。


**完成例**  
![kadai](pic/10-1.png)

**手順**  

① 課題データをQGISで読みこむ。  
② 旧北上川右岸の日和山を中心とし、ラスタデータを任意の範囲で切り抜き、新規ラスタの配色をプロパティから調整する（任意の値で設定）。  
③ 10m間隔の等高線を抽出する。  
④ ポイントの作成：地理院タイル（標準地図等）や課題データを利用し、任意の5地点の標高を調べポイントを作成する。属性テーブルは、付近の地名もしくは建物名と標高値を記入する。　　
⑤ ラインの作成：タイルレイヤプラグインを用いて背景地図（東日本大震災被災地震災後オルソ画像（2012年10月～2013））を表示し、旧北上川の橋をトレースする（なぞる）。※ラインの新規作成は、作成後右クリックで新規レイヤとして反映される。　　
⑥ ポリゴンの作成：ライン作成時に利用した空中写真を用いて、日和山の植生が多くみられる部分のポリゴンを作成する（おおまかでよい）。※ポリゴンの新規作成は、作成後右クリックで新規レイヤとして反映される。　　
ラスタから標高値を求める場合は、レイヤウィンドウでレイヤを選択した状態で、地物情報表示ツールをオンにする（アイコンをクリックする）。調べたい地点をクリックすると情報が表示される。　　
⑦ 各レイヤごとに色分けやラベル表示を行う。　　
⑧ 地図をレイアウトし、提出する。　　

#### 学習ポイント
* ラスタデータの結合・切り抜き
* 新規ベクトルレイヤの作成手法
* ベクトルデータの特徴
* 各レイヤのスタイル調整

-----------

**任意課題（余裕があれば）:カルトグラムの作成**  
[政府統計局e-stat]から国勢調査（小地域）のデータ（市区町村の町丁目人口）を用いてカルトグラム(統計データに基づいて面積や距離を変形させた地図)を作成してください。

> 東北大学 空間計画科学研究室 [カルトグラムとは?](http://www.plan.civil.tohoku.ac.jp/inoue/research/cartogram/) 

**完成例**  
![kadai](pic/21-1.png)

**手順**  
①[政府統計局e-stat]のページから、「平成22年国勢調査（小地域）」を選択し（統計表は任意で指定する）、市区町村の境界データ（世界測地系平面直角座標系・Shape形式）をダウンロードする。  
②QGISでレイヤをデータを読み込み、画面左側に表示されるレイヤの一覧から対象のデータの上で右クリックし属性テーブルを開く。属性テーブルにJINKOの項目があるかを確認する。JINKOの値に0があると計算できないため、対象のテーブルを削除するか、値を1とする。  
③QGISの「プラグインの管理とインストール」から「Cartogram」プラグインをインストールする。  
④Cartogramプラグインを起動し、JINKOの値を用いてカルトグラムを作成する。  
⑤レイヤのプロパティを開き値を色分けする（人口ごとに色分けする/正確に分類する場合は、分類数の設定にはスタージェスの公式等を用いると良い）。  
⑥地図をレイアウトする。  

--------
#### 完成例で使用したデータ
本ページで使用しているデータの出典については、該当する教材よりご確認ください。

[△メニューへもどる]:実習課題.md#menu
[作業メモ]:https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/作業メモ.md
[QGISビギナーズマニュアル]:../QGISビギナーズマニュアル/QGISビギナーズマニュアル.md
[GRASSビギナーズマニュアル]:../GRASSビギナーズマニュアル/GRASSビギナーズマニュアル.md
[既存データの地図データと属性データ]:../07_既存データの地図データと属性データ/既存データの地図データと属性データ.md
[空間データ]:../08_空間データ/空間データ.md
[空間データの結合・修正]:../10_空間データの統合・修正/空間データの統合・修正.md
[視覚的伝達]:../21_視覚的伝達/視覚的伝達.md
[政府統計局e-stat]:https://www.e-stat.go.jp/SG1/estat/eStatTopPortal.do
